---
title: MySQL
description: MySQL
date: 2023-08-02
tags: 
 - 数据库
 - MySQL
---

# MySQL

## SQL语句执行流程

### 1.连接器
在执行SQL语句之前，需要连接MySQL服务器
```bash
# -h 指定MySQL服务器IP地址
# -u 指定用户名
# -p 指定密码
mysql -h$ip -u$user -p
```
经TCP三次握手后建立连接，连接器验证用户名和密码，若正确，获取用户权限。

### 2.查询缓存（MySQL8.0之前）

若SQL语句为查询(select)语句，

### 3.解析SQL


### 4.执行SQL




## 引擎

### InnoDB

InnoDB是MySQL默认的事务性存储引擎，其核心优势在于ACID事务的完整支持，这确保了在高并发环境下数据操作的**原子性、一致性、隔离性和持久性**。

InnoDB采用了**行级锁定**机制，能够最大程度地减少并发写入时的锁冲突，提高系统的并发处理能力。

InnoDB还支持**外键约束**，有助于维护数据之间的参照完整性，并通过**redo log和undo log**实现了可靠的**崩溃恢复**能力，保证数据在意外停机后的不丢失和一致性。

InnoDB引擎内部的**缓冲池**机制也能有效地缓存数据和索引，提升读写能力。因此，InnoDB适用于有**高并发、事务支持和数据完整性**需求的应用场景。

### MyISAM

MyISAM是一个**非事务性**的存储引擎，它**不支持ACID事务**，这意味着并发写入或系统崩溃时，数据的一致性无法得到保证。同样**不支持外键约束**。

MyISAM采用了**表级锁定**，即当一个写操作发生时，会锁定整个表，这在**高并发**写入场景下会导致严重的性能瓶颈。

MyISAM的主要特点是**读取速度快**，因为它将数据和索引分开存储，且结构相对简单。然而由于**缺乏事务支持和行级锁定**，MyISAM更适用于**读多写少**、对数据一致性要求不高的简单应用，如只读的报表查询或日志记录。

### Memory

Memory引擎将所有数据存储在**内存**中，具有**极高的读写速度**。因此也导致了其数据的**易失性**，一旦MySQL服务器关闭或重启，存储在Memory引擎中的数据将全部丢失。

Memory引擎支持**表级锁定**，该引擎通常适用于创建**临时表**，或者缓存一些**频繁访问且数据量不大、对持久性要求不高**的临时数据，以加速查询。

### Archive

Archive引擎主要用于存储**大量不经常访问的归档数据**。其最大的特点是对数据进行**高度压缩**，能够显著节省存储空间。

Archive引擎支持**高速数据插入**，但其**查询性能非常差**，通常只能进行全表扫描，且**不支持索引**。因此它适用于那些只需要将数据长期保存，并对查询性能要求不高的场景，如存储历史日志或传感器数据。

## 锁

### 全局锁


### 表级锁


## 行级锁